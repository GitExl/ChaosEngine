module data.tilesets;

import game.game;
import game.actor;
import game.pickup;
import game.level;
import game.player;

import data.palettes;

import behaviour.pickups;


public enum PickupVariables : ubyte {
    NONE = 0,
    MONEY = 12,
    KEYS_SILVER = 16,
    KEYS_GOLD = 20,
}

public struct PickupType {
	PickupVariables variable;
	bool unknown1;
    ubyte quantity;
	PickupFunc func;
	ubyte soundIndex;
	ubyte score;
	ubyte unknown2;
}

public struct TileSetInfo {
    string name;
    string[] tileFiles;
    string itemsFile;
    PaletteIndex paletteIndex;
    PickupType[] pickups;
}

alias void function(Game game, Player* player) PickupFunc;

static immutable TileSetInfo[] TILESET_INFO = [
    {
        "tileset0",
        ["lev1bak.bin"],
        "items_set0",
        PaletteIndex.WORLD1,
        [
	        {PickupVariables.NONE, 1, 0, &pickupFirstAid, 54, 50, 2},
	        {PickupVariables.NONE, 1, 0, &pickupDynamite, 55, 0, 0},
	        {PickupVariables.NONE, 1, 0, &pickupPlayerSave, 61, 100, 0},
	        {PickupVariables.NONE, 0, 0, &pickupMolotov, 57, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPartyPower, 53, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupMap, 56, 0, 8},
	        {PickupVariables.KEYS_SILVER, 0, 1, null, 88, 75, 0},
	        {PickupVariables.NONE, 1, 0, &pickupBomb, 52, 0, 8},
	        {PickupVariables.KEYS_GOLD, 0, 1, null, 34, 75, 0},
	        {PickupVariables.NONE, 1, 0, &pickupDestroyNode, 0, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupShotBurst, 51, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupSpecialPower, 40, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPowerup, 39, 0, 4},
	        {PickupVariables.NONE, 1, 0, &pickupFood1, 60, 0, 2},
	        {PickupVariables.NONE, 1, 0, &pickupFood2, 60, 0, 2},
	        {PickupVariables.MONEY, 1, 5, &pickupCoins1, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 10, &pickupCoins2, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 15, &pickupCoins3, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 20, &pickupCoins4, 32, 0, 1},
	        {PickupVariables.NONE, 1, 0, &pickupExtraLife, 73, 0, 16},
	        {PickupVariables.MONEY, 1, 10, &pickupCoins2, 32, 0, 1},
	        {PickupVariables.NONE, 1, 0, &pickupDynamite, 55, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPlayerSave, 61, 100, 0},
	        {PickupVariables.NONE, 0, 0, &pickupMolotov, 57, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPartyPower, 53, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupMap, 56, 0, 8},
	        {PickupVariables.KEYS_SILVER, 0, 1, null, 88, 75, 0},
	        {PickupVariables.NONE, 1, 0, &pickupBomb, 52, 0, 8},
	        {PickupVariables.KEYS_GOLD, 0, 1, null, 34, 75, 0},
	        {PickupVariables.NONE, 1, 0, &pickupDestroyNode, 0, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupShotBurst, 51, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupSpecialPower, 40, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPowerup, 39, 0, 4},
	        {PickupVariables.NONE, 1, 0, &pickupFood1, 60, 0, 2},
	        {PickupVariables.NONE, 1, 0, &pickupFood2, 60, 0, 2},
	        {PickupVariables.MONEY, 1, 5, &pickupCoins1, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 10, &pickupCoins2, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 15, &pickupCoins3, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 30, &pickupCoins5, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 10, &pickupCoins2, 32, 0, 1},
        ],
    },
    {
        "tileset1",
        ["lev2bak.bin"],
        "items_set1",
        PaletteIndex.WORLD2,
    	[
            {PickupVariables.NONE, 1, 0, &pickupFirstAid, 54, 50, 2},
	        {PickupVariables.NONE, 1, 0, &pickupDynamite, 55, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPlayerSave, 61, 100, 0},
	        {PickupVariables.NONE, 1, 0, &pickupAirBurst, 95, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupTelephone, 93, 50, 0},
	        {PickupVariables.NONE, 1, 0, &pickupMap, 56, 0, 8},
	        {PickupVariables.KEYS_SILVER, 0, 1, null, 88, 75, 0},
	        {PickupVariables.NONE, 0, 0, &pickupRepelMonsters, 77, 0, 8},
	        {PickupVariables.KEYS_GOLD, 0, 1, null, 34, 75, 0},
	        {PickupVariables.NONE, 0, 0, &pickupShield, 72, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupExtraLife, 73, 0, 16},
	        {PickupVariables.NONE, 0, 0, &pickupSpecialPower, 40, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPowerup, 39, 0, 4},
	        {PickupVariables.NONE, 1, 0, &pickupFood1, 60, 0, 2},
	        {PickupVariables.NONE, 1, 0, &pickupFood2, 60, 0, 2},
	        {PickupVariables.MONEY, 1, 5, &pickupCoins1, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 10, &pickupCoins2, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 15, &pickupCoins3, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 20, &pickupCoins4, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 100, &pickupEmerald1, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 10, &pickupCoins2, 32, 0, 1},
	        {PickupVariables.NONE, 1, 0, &pickupDynamite, 55, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPlayerSave, 61, 100, 0},
	        {PickupVariables.NONE, 1, 0, &pickupAirBurst, 95, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupTelephone, 93, 50, 0},
	        {PickupVariables.NONE, 1, 0, &pickupMap, 56, 0, 8},
	        {PickupVariables.KEYS_SILVER, 0, 1, null, 88, 75, 0},
	        {PickupVariables.NONE, 0, 0, &pickupRepelMonsters, 77, 0, 8},
	        {PickupVariables.KEYS_GOLD, 0, 1, null, 34, 75, 0},
	        {PickupVariables.NONE, 0, 0, &pickupShield, 72, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupExtraLife, 73, 0, 16},
	        {PickupVariables.NONE, 0, 0, &pickupSpecialPower, 40, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPowerup, 39, 0, 4},
	        {PickupVariables.NONE, 1, 0, &pickupFood1, 60, 0, 2},
	        {PickupVariables.NONE, 1, 0, &pickupFood2, 60, 0, 2},
	        {PickupVariables.MONEY, 1, 5, &pickupCoins1, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 10, &pickupCoins2, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 15, &pickupCoins3, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 30, &pickupCoins5, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 10, &pickupCoins2, 32, 0, 1},
        ],
    },
    {
        "tileset2",
        ["lev3bak.bin"],
        "items_set2",
        PaletteIndex.WORLD3,
    	[
            {PickupVariables.NONE, 1, 0, &pickupFirstAid, 54, 50, 2},
	        {PickupVariables.NONE, 1, 0, &pickupDynamite, 55, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPlayerSave, 61, 100, 0},
	        {PickupVariables.NONE, 0, 0, &pickupDistractMonsters, 78, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupTelephone, 93, 50, 8},
	        {PickupVariables.NONE, 1, 0, &pickupMap, 56, 0, 8},
	        {PickupVariables.KEYS_SILVER, 0, 1, null, 88, 75, 0},
	        {PickupVariables.NONE, 0, 0, &pickupFreezeMonsters, 83, 0, 8},
	        {PickupVariables.KEYS_GOLD, 0, 1, null, 34, 75, 0},
	        {PickupVariables.NONE, 0, 0, &pickupShield, 72, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupGroundMine, 87, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupSpecialPower, 40, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPowerup, 39, 0, 4},
	        {PickupVariables.NONE, 1, 0, &pickupFood1, 60, 0, 2},
	        {PickupVariables.NONE, 1, 0, &pickupFood2, 60, 0, 2},
	        {PickupVariables.MONEY, 1, 5, &pickupCoins1, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 10, &pickupCoins2, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 15, &pickupCoins3, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 20, &pickupCoins4, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 100, &pickupEmerald1, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 10, &pickupCoins2, 32, 0, 1},
	        {PickupVariables.NONE, 1, 0, &pickupDynamite, 55, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPlayerSave, 61, 100, 0},
	        {PickupVariables.NONE, 0, 0, &pickupDistractMonsters, 78, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupTelephone, 93, 50, 0},
	        {PickupVariables.NONE, 1, 0, &pickupMap, 56, 0, 8},
	        {PickupVariables.KEYS_SILVER, 0, 1, null, 88, 75, 0},
	        {PickupVariables.NONE, 0, 0, &pickupFreezeMonsters, 83, 0, 8},
	        {PickupVariables.KEYS_GOLD, 0, 1, null, 34, 75, 0},
	        {PickupVariables.NONE, 0, 0, &pickupShield, 72, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupGroundMine, 87, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupSpecialPower, 40, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPowerup, 39, 0, 4},
	        {PickupVariables.NONE, 1, 0, &pickupFood1, 60, 0, 2},
	        {PickupVariables.NONE, 1, 0, &pickupFood2, 60, 0, 2},
	        {PickupVariables.MONEY, 1, 5, &pickupCoins1, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 10, &pickupCoins2, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 15, &pickupCoins3, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 30, &pickupCoins5, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 10, &pickupCoins2, 32, 0, 1},
        ],
    },
    {
        "tileset3a",
        ["lev4bak.bin", "lev5bak.bin"],
        "items_set3",
        PaletteIndex.WORLD4,
    	[
            {PickupVariables.NONE, 1, 0, &pickupFirstAid, 54, 50, 2},
	        {PickupVariables.NONE, 1, 0, &pickupDynamite, 55, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPlayerSave, 61, 100, 0},
	        {PickupVariables.NONE, 1, 0, &pickupDistractMonsters, 78, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupTelephone, 93, 50, 8},
	        {PickupVariables.NONE, 1, 0, &pickupMap, 56, 0, 8},
	        {PickupVariables.KEYS_SILVER, 0, 1, null, 88, 75, 0},
	        {PickupVariables.NONE, 1, 0, &pickupFreezeMonsters, 83, 0, 8},
	        {PickupVariables.KEYS_GOLD, 0, 1, null, 34, 75, 0},
	        {PickupVariables.NONE, 0, 0, &pickupShield, 72, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupGroundMine, 87, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupSpecialPower, 40, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPowerup, 39, 0, 4},
	        {PickupVariables.NONE, 1, 0, &pickupFood1, 60, 0, 2},
	        {PickupVariables.NONE, 1, 0, &pickupFood2, 60, 0, 2},
	        {PickupVariables.MONEY, 1, 5, &pickupCoins1, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 10, &pickupCoins2, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 15, &pickupCoins3, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 20, &pickupCoins4, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 100, &pickupEmerald1, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 10, &pickupCoins2, 32, 0, 1},
	        {PickupVariables.NONE, 1, 0, &pickupDynamite, 55, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPlayerSave, 61, 100, 0},
	        {PickupVariables.NONE, 1, 0, &pickupDistractMonsters, 78, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupTelephone, 93, 50, 8},
	        {PickupVariables.NONE, 1, 0, &pickupMap, 56, 0, 8},
	        {PickupVariables.KEYS_SILVER, 0, 1, null, 88, 75, 0},
	        {PickupVariables.NONE, 1, 0, &pickupFreezeMonsters, 83, 0, 8},
	        {PickupVariables.KEYS_GOLD, 0, 1, null, 34, 75, 0},
	        {PickupVariables.NONE, 0, 0, &pickupDestroyNode, 0, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupGroundMine, 87, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupSpecialPower, 40, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupMolotov, 57, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPartyPower, 53, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupShotBurst, 51, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupRepelMonsters, 77, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupAirBurst, 95, 0, 16},
	        {PickupVariables.NONE, 1, 0, &pickupExtraLife, 73, 0, 1},
	        {PickupVariables.MONEY, 1, 30, &pickupCoins5, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 200, &pickupEmerald2, 32, 0, 0},
        ],
    },
    {
        "tileset3b",
        ["lev4bak.bin", "lev6bak.bin"],
        "items_set3",
        PaletteIndex.WORLD4,
    	[
            {PickupVariables.NONE, 1, 0, &pickupFirstAid, 54, 50, 2},
	        {PickupVariables.NONE, 1, 0, &pickupDynamite, 55, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPlayerSave, 61, 100, 0},
	        {PickupVariables.NONE, 1, 0, &pickupDistractMonsters, 78, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupTelephone, 93, 50, 8},
	        {PickupVariables.NONE, 1, 0, &pickupMap, 56, 0, 8},
	        {PickupVariables.KEYS_SILVER, 0, 1, null, 88, 75, 0},
	        {PickupVariables.NONE, 1, 0, &pickupFreezeMonsters, 83, 0, 8},
	        {PickupVariables.KEYS_GOLD, 0, 1, null, 34, 75, 0},
	        {PickupVariables.NONE, 0, 0, &pickupShield, 72, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupGroundMine, 87, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupSpecialPower, 40, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPowerup, 39, 0, 4},
	        {PickupVariables.NONE, 1, 0, &pickupFood1, 60, 0, 2},
	        {PickupVariables.NONE, 1, 0, &pickupFood2, 60, 0, 2},
	        {PickupVariables.MONEY, 1, 5, &pickupCoins1, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 10, &pickupCoins2, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 15, &pickupCoins3, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 20, &pickupCoins4, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 100, &pickupEmerald1, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 10, &pickupCoins2, 32, 0, 1},
	        {PickupVariables.NONE, 1, 0, &pickupDynamite, 55, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPlayerSave, 61, 100, 0},
	        {PickupVariables.NONE, 1, 0, &pickupDistractMonsters, 78, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupTelephone, 93, 50, 8},
	        {PickupVariables.NONE, 1, 0, &pickupMap, 56, 0, 8},
	        {PickupVariables.KEYS_SILVER, 0, 1, null, 88, 75, 0},
	        {PickupVariables.NONE, 1, 0, &pickupFreezeMonsters, 83, 0, 8},
	        {PickupVariables.KEYS_GOLD, 0, 1, null, 34, 75, 0},
	        {PickupVariables.NONE, 0, 0, &pickupDestroyNode, 0, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupGroundMine, 87, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupSpecialPower, 40, 0, 8},
	        {PickupVariables.NONE, 0, 0, &pickupMolotov, 57, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupPartyPower, 53, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupShotBurst, 51, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupRepelMonsters, 77, 0, 8},
	        {PickupVariables.NONE, 1, 0, &pickupAirBurst, 95, 0, 16},
	        {PickupVariables.NONE, 1, 0, &pickupExtraLife, 73, 0, 1},
	        {PickupVariables.MONEY, 1, 30, &pickupCoins5, 32, 0, 1},
	        {PickupVariables.MONEY, 1, 200, &pickupEmerald2, 32, 0, 0},
        ]
    },
];